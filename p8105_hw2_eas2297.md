Homework 2
================
Eileen Shea
October 5, 2018

## Problem 1

First we need to read and clean the NYC transit data, while also
retaining only the necessary variables and converting the *entry*
variable from character to
logical:

``` r
subway_data = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:route11, entry, vending, entrance_type, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

The dataset we have right now is a subset of NYC Transit data that
relates information about entrances and exits for each subway station in
NYC. Variables that have been kept as part of our dataset are: line,
station\_name, station\_latitude, station\_longitude, route1-11, entry,
vending, entrance\_type, and ada. These data encompass numerous data
types, including character variables (e.g. line, station\_name), double
variables (e.g. station\_latitude, station\_longitude), integer
variables (e.g. route8, route11), and logical variables (e.g. ada,
entry). So far, the data cleaning steps have involved turning all of the
variable names into lower snake case, getting rid of extraneous
variables, and converting between character and logical variable for
*entry*. The dataset consits of 1868 rows and 19 columns. Right now, the
dataset is not particularly tidy, especially due to the fact that some
columns are values instead of variable names (i.e. route1-11 columns).

First, we are curious about how many distinct stations there are:

``` r
distinct_sub = subway_data %>% 
  distinct(line, station_name, .keep_all = TRUE)
```

From the above code chunk, we learn that there are **465** distinct
subway stations.

Next, we are curious about how many stations are ADA compliant:

``` r
sum(distinct_sub$ada)
```

    ## [1] 84

It turns out that there are only **84** ADA compliant subway stations
out of that bunch.

We are then curious about what proportion of station entrances / exits
without vending allow entrance:

``` r
no_vending = subway_data %>% 
  filter(vending == "NO")

sum(no_vending$entry)/length(no_vending$entry)
```

    ## [1] 0.3770492

From this code chunk we learn that the proportion of station entrances /
exits without vending that allow entrance is **0.377**.

Now it is important to reformat the dataset so that route number and
route name are distinct
variables:

``` r
subway_tidy_data = gather(subway_data, key = rt_number, value = route_name, route1:route11) %>% 
  separate(rt_number, into = c("remove", "route_number"), sep = 5) %>% 
  select(everything(), -remove)
```

We also are interested in identifying how many distinct stations serve
the A train:

``` r
A_train = subway_tidy_data %>% 
  distinct(line, station_name, .keep_all = TRUE) %>% 
  filter(route_name == "A")

nrow(A_train)
```

    ## [1] 60

The A train according to this dataset serves **60** distinct stations.

Of the stations that serve the A train, we are interested in which are
ADA compliant:

``` r
sum(A_train$ada)
```

    ## [1] 17

Out of 60 A train stations, **17** are ADA compliant.

## Problem 2

First we need to read and clean the Excel file by specifying the
Mr. Trash Wheel sheet and omitting the notes columns, using reasonable
variable names, omitting rows that do not include dumpster-specific
data, rounding the number of sports balls to the nearest integer, and
converting this result to an integer variable:

``` r
library(readxl)
mr_trash_wheel = 
  read_xlsx("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N338") %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(sports_ball_count = as.integer(round(sports_balls))) %>% 
  select(everything(), -sports_balls)
```

Next we will read and clean the precipitation data for 2016 and 2017.
Steps include omitting rows without precipitation data and adding a
variable
year:

``` r
precip_2016 = read_xlsx("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2016 Precipitation", range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  mutate(year = "2016")

precip_2017 = read_xlsx("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2017 Precipitation", range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  mutate(year = "2017")
```
